---
description: 
globs: 
alwaysApply: true
---
name: Senior Dev Challenge Rules
description: Cursor rules tailored for the 2025-05 Senior Dev Take-Home Backend & GPT-Chaining task.
version: 1.0.0
tags: [django, celery, docker, tdd, openapi, testing]

rules:

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # 1. Environment & Docker
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - name: Require Dockerfile and docker-compose.yml in project root
    match: ".*"
    suggest: "âš™ï¸ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ë°˜ë“œì‹œ Dockerfileê³¼ docker-compose.yml íŒŒì¼ì„ í¬í•¨í•˜ì„¸ìš”."
    priority: highest

  - name: Prevent committing secrets
    pattern: "ENV\\s+OPENAI_API_KEY|openai_api_key"
    suggest: "ğŸ”’ API í‚¤ëŠ” .envì— ë³´ê´€í•˜ê³  .gitignoreì— ë“±ë¡í•˜ì„¸ìš”. ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ì§€ ë§ˆì„¸ìš”."
    priority: highest

  - name: Use docker-compose up for local run
    match: ".*"
    suggest: "ğŸ›  â€˜docker compose up --buildâ€™ ëª…ë ¹ì–´ë¡œë§Œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ì„¸ìš”. ë¡œì»¬ í™˜ê²½ ì¢…ì† ì½”ë“œë¥¼ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”."
    priority: high

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # 2. TDD & Testing
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - name: Tests must be written before implementation
    match: ".*"
    suggest: "ğŸ§ª ë¨¼ì € ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•œ ë’¤ì— êµ¬í˜„ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”."
    priority: high

  - name: Enforce â‰¥70% unit-test coverage
    match: ".*"
    suggest: "âœ… ìµœì†Œ 70% ìœ ë‹› í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë‹¬ì„± ëª©í‘œë¥¼ ìœ ì§€í•˜ì„¸ìš”. Coverage ë¦¬í¬íŠ¸ë¥¼ ì§‘ì¤‘ì ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”."
    priority: high

  - name: Test filenames must end with _test.py or test_*.py
    pattern: ".+\\.py"
    match: ".*"
    suggest: "ğŸ“ í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ test_*.py í˜¹ì€ *_test.py í˜•íƒœë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”."
    when: file.extension == "py"

  - name: Do not write production code without a failing test
    pattern: "def\\s+(?!test_).*"
    suggest: "ğŸš« production ì½”ë“œ ì‘ì„± ì „ì— ë°˜ë“œì‹œ í•´ë‹¹ ê¸°ëŠ¥ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”."
    when: file.extension == "py"

  - name: Celery tasks require separate integration tests
    pattern: "app/tasks"
    suggest: "ğŸ”„ Celery ì›Œì»¤ê°€ ì‹¤ì œë¡œ íì—ì„œ ì‘ì—…ì„ ê°€ì ¸ì˜¤ëŠ”ì§€ í™•ì¸í•˜ëŠ” í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”."
    when: file.path contains "tasks.py"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # 3. API & OpenAPI Spec
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - name: Ensure POST /jobs endpoint exists
    match: "views\\.py|urls\\.py"
    suggest: "ğŸ” POST /jobs ì—”ë“œí¬ì¸íŠ¸ê°€ views.pyì™€ urls.pyì— ì„ ì–¸ë¼ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”."
    priority: high

  - name: Ensure GET /jobs/{event_id} endpoint exists
    match: "views\\.py|urls\\.py"
    suggest: "ğŸ” GET /jobs/{event_id} ì—”ë“œí¬ì¸íŠ¸ê°€ views.pyì™€ urls.pyì— ì„ ì–¸ë¼ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”."
    priority: high

  - name: Auto-generate OpenAPI spec (drf-spectacular, drf-yasg ë“±)
    match: "settings\\.py|requirements\\.txt"
    suggest: "ğŸ“„ REST frameworkìš© OpenAPI ìŠ¤í™ ìë™ ìƒì„±ì„ ì„¤ì •í•˜ì„¸ìš” (e.g. drf-spectacular, drf-yasg)."
    priority: high

  - name: Validate that swagger/ui route is reachable
    pattern: "urlpatterns.*swagger.*"
    suggest: "ğŸŒ /swagger/ ë˜ëŠ” /redoc/ ê²½ë¡œê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”."
    when: file.path contains "urls.py"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # 4. Queue & Persistence
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - name: Use Redis or RabbitMQ broker for Celery
    pattern: "CELERY_BROKER_URL"
    suggest: "ğŸš€ Redis í˜¹ì€ RabbitMQë¥¼ ë¸Œë¡œì»¤ë¡œ êµ¬ì„±í–ˆëŠ”ì§€ settings.pyì—ì„œ í™•ì¸í•˜ì„¸ìš”."
    when: file.extension == "py"

  - name: Persist job status in Postgres
    match: "models\\.py"
    suggest: "ğŸ’¾ Job ëª¨ë¸ì— ìƒíƒœ(status), ê²°ê³¼(result) í•„ë“œë¥¼ ì •ì˜í•˜ê³  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ì„¸ìš”."
    priority: high

  - name: Two-step GPT chain must be queued
    match: "tasks\\.py"
    suggest: "ğŸ¤– Celery ì›Œì»¤ ë‚´ë¶€ì—ì„œ summarize â†’ generate_checklist ìˆœìœ¼ë¡œ GPT API í˜¸ì¶œ íë¦„ì„ êµ¬í˜„í•˜ì„¸ìš”."
    priority: medium

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # 5. Code Quality & Linting
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - name: Enforce PEP8 / flake8 for Python files
    match: ".*\\.py"
    suggest: "ğŸ” flake8 ë˜ëŠ” blackìœ¼ë¡œ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ìë™ ì •ë¦¬í•˜ì„¸ìš”."
    priority: medium

  - name: Lint Dockerfiles
    pattern: "^(FROM|RUN|CMD|ENTRYPOINT|COPY|WORKDIR|ENV)"
    suggest: "ğŸ›  hadolint ê°™ì€ ë„êµ¬ë¡œ Dockerfile ë¦°íŒ…ì„ ìˆ˜í–‰í•˜ì„¸ìš”."
    when: file.name == "Dockerfile"

  - name: Lint YAML (docker-compose.yml)
    pattern: ".*"
    suggest: "ğŸ”§ yamllintë¡œ docker-compose.yml íŒŒì¼ì„ ê²€ì‚¬í•˜ì„¸ìš”."
    when: file.name == "docker-compose.yml"

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # 6. Commit Hygiene & Documentation
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - name: Ensure README â‰¤300 words
    match: "README\\.md"
    suggest: "ğŸ“– 300ë‹¨ì–´ ì´í•˜ë¡œ ì„¤ê³„ ì„¤ëª…, AI ë„êµ¬ ì‚¬ìš© ë‚´ì—­, ì‹¤í–‰ ë°©ë²• ë“±ì„ ì‘ì„±í•˜ì„¸ìš”."
    priority: high

  - name: Ensure MIT or Apache-2 license file exists
    match: "LICENSE"
    suggest: "ğŸ“œ ì €ì¥ì†Œ ë£¨íŠ¸ì— MIT ë˜ëŠ” Apache-2 ë¼ì´ì„ ìŠ¤ íŒŒì¼ì„ ì¶”ê°€í•˜ì„¸ìš”."
    priority: high

  - name: Verify test coverage badge in README (optional)
    match: "README\\.md"
    suggest: "ğŸ¯ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë±ƒì§€ë¥¼ ì¶”ê°€í•´ ë¹Œë“œ íŒŒì´í”„ë¼ì¸ ìƒíƒœë¥¼ ì‹œê°í™”í•˜ì„¸ìš”."
    priority: low

  - name: One-command bootstrap instruction must be present
    match: "README\\.md"
    suggest: "â–¶ï¸ â€˜docker compose up --buildâ€™ ì‹¤í–‰ ë°©ë²•ì„ ëª…ì‹œí–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”."
    priority: high